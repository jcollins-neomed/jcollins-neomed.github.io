<select id="categorySelect">
  <option value="">--Choose a dominant city--</option>
  <option value="Cleveland">Cleveland</option>
  <option value="Akron">Akron</option>
  <option value="Youngstown">Youngstown</option>
  <option value="Columbus">Columbus</option>
</select>
<button onclick="searchCSV()">Search</button>

<div id="result"></div>

<!-- PapaParse for CSV parsing -->
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const dropdown = document.getElementById('dropdown');
  const searchBtn = document.getElementById('searchBtn');
  const resultDiv = document.getElementById('result');

  async function searchCSV() {
    const choice = dropdown.value.trim();
    if (!choice) {
      resultDiv.innerHTML = 'Please select a city.';
      return;
    }

    try {
      // Fetch schedules.csv from the same directory as index.html
      const response = await fetch('schedules.csv');
      const text = await response.text();

      // Parse CSV and filter by Dominant City
      const parsed = Papa.parse(text, { header: true });
      const matches = parsed.data
        .filter(row => row['Dominant City'] === choice)
        .map(row => row['Student ID']);

      // Display results
      resultDiv.innerHTML = matches.length
        ? `<strong>Matches:</strong><ul>${matches.map(m => `<li>${m}</li>`).join('')}</ul>`
        : 'No matches found.';
    } catch (err) {
      console.error(err);
      resultDiv.innerHTML = 'Error reading CSV file.';
    }
  }

  // Attach listener to button
  searchBtn.addEventListener('click', searchCSV);
});
</script>

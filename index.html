<title>Jason's Lottery Helper Tool</title>

<body>
  <select id="dropdown">
    <option value="">--Choose City--</option>
    <option value="Akron">Akron</option>
    <option value="Cleveland">Cleveland</option>
    <option value="Youngstown">Youngstown</option>
    <option value="Columbus">Columbus</option>
  </select>
  <button id="searchBtn">Search</button>
  <div id="result"></div>

<div id="result"></div>

<!-- PapaParse for CSV parsing -->
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const dropdown = document.getElementById('dropdown');
  const searchBtn = document.getElementById('searchBtn');
  const resultDiv = document.getElementById('result');

  async function searchCSV() {
    const choice = dropdown.value.trim();
    if (!choice) {
      resultDiv.textContent = 'Please select a city.';
      return;
    }

    try {
      const response = await fetch('schedules.csv');
      const text = await response.text();
      const parsed = Papa.parse(text, { header: true });

      // Collect Student IDs where Dominant City matches
      const matches = parsed.data
        .filter(row => row['Dominant City'] === choice)
        .map(row => row['Student ID']);

      // Output all matches on one line, separated by commas
      resultDiv.innerHTML = matches.length
        ? `<strong>Matches:</strong> ${matches.join(', ')}`
        : 'No matches found.';
    } catch (err) {
      console.error(err);
      resultDiv.textContent = 'Error reading CSV file.';
    }
  }

  searchBtn.addEventListener('click', searchCSV);
});
</script>
